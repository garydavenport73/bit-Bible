<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        html {
            font-family: Arial, Helvetica, sans-serif;
        }

        pre {
            white-space: pre-wrap;
            font-family: Arial, Helvetica, sans-serif;
        }
        body{
            display:flex;
        }
    </style>
</head>

<body>
    <main id="bible">
        <select id="bible-select"></select>
        <div id="bible-contents"></div>
    </main>
    <main id="dictionary">
        <input type="search" id="dictionary-input" list="bible-words">
        <div id="dictionary-contents"></div>
    </main>
    <main id="commentary">
        <select id="commentary-select"></select>
        <div id="commentary-contents"></div>
    </main>
    <datalist id="bible-words"></datalist>
</body>
<script src="osisReferencesArray.js"></script>
<!-- <script src="BSBBibleNoWordTags.js"></script> -->
<script src="bsbNested.js"></script>
<script src="headings.js"></script>
<script src="paragraphLocations.js"></script>
<script src="eastonsModified.js"></script>
<script src="osisToFullName.js"></script>


<script src="yourbible.js"></script>
<script>console.log(jfb)</script>

<!-- <script src="jfbFormattedOsis.js"></script> -->


<script>
    let bibleSelect = document.getElementById("bible-select");
    let bibleContents = document.getElementById("bible-contents");
    let commentarySelect = document.getElementById("commentary-select");
    let commentaryContents = document.getElementById("commentary-contents");
    let dictionaryInput = document.getElementById("dictionary-input");
    let str = "";
    //console.log(osisReferencesArray)
    let currentBook="";
    let currentChapter="";
    for (let i = 0; i < osisReferencesArray.length; i++) {
        let book=osisReferencesArray[i].split(".")[0];
        let chapter=osisReferencesArray[i].split(".")[1];
        if (book!==currentBook){
            currentBook=book;
            str += "<option value='" + currentBook+".1"+ "'>" + currentBook+".1" + "</option>";
        }
        if (chapter!=currentChapter){
            currentChapter=chapter;
            str += "<option value='" + currentBook+"."+currentChapter+ "'>" + currentBook+"."+currentChapter + "</option>";
        }
        //sstr += "<option value='" + osisReferencesArray[i] + "'>" + osisReferencesArray[i] + "</option>";
    }
    bibleSelect.innerHTML = str;
    commentarySelect.innerHTML = str;

    commentarySelect.addEventListener("input", showCommentaryChapter);

    bibleSelect.addEventListener("input", showBibleChapter);

    function showCommentaryChapter() {

        //if (bcv === "") {
        bcv = commentarySelect.value;
        console.log(commentarySelect.value);
        //}
        let book = bcv.split(".")[0];
        let chapter = bcv.split(".")[1];

        console.log(book + "." + chapter);

        let contents=jfb[book + "." + chapter];
        console.log(contents);
        console.log(typeof(contents));

        contents=contents.replace(/ {4,}/g,"&nbsp;&nbsp;&nbsp;&nbsp;");
        contents=contents.replace(/\n/g,"<br>");
            
        commentaryContents.innerHTML = contents;
        console.log(book + "." + chapter);
    }

    function showBibleChapter() {
        bcv = bibleSelect.value;
        let book = bcv.split(".")[0];
        let chapter = bcv.split(".")[1];
        console.log(book, chapter);
        console.log(osisReferencesArray);
        let chapterContents = "<h2>" + osisToFullName[book].toUpperCase() + " " + chapter.toUpperCase() + "</h2>";
        for (let i = 0; i < 200; i++) {
            if (bsbNested[book][chapter][i.toString()]!==undefined){
               let currentBCV=book+"."+chapter+"."+i.toString();
                if (paragraphLocations.includes(currentBCV)) {
                    chapterContents += "<br><br>";
                }
                if (headings[currentBCV] !== undefined) {
                    chapterContents += "<h3>" + headings[currentBCV] + "</h3>";
                }
                chapterContents += "<sup>" + i.toString() + ".</sup>" + bsbNested[book][chapter][i.toString()];
            }
            bibleContents.innerHTML = chapterContents;
        }
    }

    //showBibleChapter();
</script>

</html>